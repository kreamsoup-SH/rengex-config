# 가져오기 단계에서 추출할 텍스트의 정규식 파일입니다. 기본값으로 파일 전체를 번역합니다.
# 파일 전체가 하나의 정규식이고, #으로 시작하는 줄은 주석으로 처리됩니다.# (?<영문이름>)으로 감싼 그룹의 내용만 추출합니다.
# 닷넷 정규식 문법 URL: https://docs.microsoft.com/ko-kr/dotnet/standard/base-types/regular-expression-language-quick-reference
# 정규식 테스트 URL: https://regex101.com/r/IQeg4l/1

# RPG Maker MV .json 파일 대응 추출 정규식

# 주석, 문자열, 정규식 시작토큰, 일본어 이외 스킵
[^"'/\jp]+

# 한 줄 주석
|//(?>
  (?<line_c>.*?[\jp].*)
  # 일본어 없으면 스킵
  |.*
)

# 여러 줄 주석
|/\*(?:
  (?<block_c>(?:(?<!\*/)[\s\S])*?[\jp][\s\S]*?)
  # 일본어 없으면 스킵
  |[\s\S]*?
)\*/

# "..." 안 일본어.
# ,등으로 문자열을 분할하는 경우 번역 과정에서 공백이 들어가면 안 되기에 배제
|"(?>
  # 공백으로 분리된 일본어 추출
  (?<double_q>(?>\\.|[^\jp\s"])*[\jp](?>\\.|[^\s"])*)
  # 다음 공백까지 무시
  |(?>\\.|[^\jp\s"])*(?:\\.|\s)*
)*?"

# '...' 안 일본어
# ,등으로 문자열을 분할하는 경우 번역 과정에서 공백이 들어가면 안 되기에 배제
|'(?>
  # 공백으로 분리된 일본어 추출
  (?<single_q>(?>\\.|[^\jp\s'])*[\jp](?>\\.|[^\s'])*)
  # 다음 공백까지 무시
  |(?>\\.|[^\jp\s'])*(?:\\.|\s)*
)*?'

# `...` 안 일본어… 포기

# /.../ 정규식 안 일본어
|/(?<![\d\w\)]\s*?/)(?>
  # 공백으로 분리된 일본어 추출
  (?<regex>\w*?[\jp]\w*)
  # 다음 공백까지 무시
  |(?>\\.|\w)*
)*?/

# 코드 일본어. 공백이 아예 들어가면 안 됨.
|(?<code>[\jp][^\x00-\x7f]+)
